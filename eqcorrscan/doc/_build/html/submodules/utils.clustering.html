

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.1. clustering &mdash; EQcorrscan 0.1.2rc documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/EQcorrscan_logo.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="EQcorrscan 0.1.2rc documentation" href="../index.html"/>
        <link rel="up" title="5. Utils" href="../utils.html"/>
        <link rel="next" title="5.2. plotting" href="utils.plotting.html"/>
        <link rel="prev" title="5. Utils" href="../utils.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> EQcorrscan
          

          
            
            <img src="../_static/EQcorrscan_logo.jpg" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction to the EQcorrscan package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates.html">2. What&#8217;s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">3. EQcorrscan tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core.html">4. Core</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../utils.html">5. Utils</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">5.1. clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.plotting.html">5.2. plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.findpeaks.html">5.3. findpeaks</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.locate.html">5.4. locate</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.mag_calc.html">5.5. mag_calc</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.pre_processing.html">5.6. pre_processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.seismo_logs.html">5.7. seismo_logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.sfile_util.html">5.8. sfile_util</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.stacking.html">5.9. stacking</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.synth_seis.html">5.10. synth_seis</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.catalog_to_dd.html">5.11. catalog_to_dd</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.sac_util.html">5.12. sac_util</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">EQcorrscan</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../utils.html">5. Utils</a> &raquo;</li>
      
    <li>5.1. clustering</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/submodules/utils.clustering.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-clustering">
<span id="clustering"></span><h1>5.1. clustering<a class="headerlink" href="#module-clustering" title="Permalink to this headline">¶</a></h1>
<p>Functions to cluster seismograms by a range of constraints.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Calum Chamberlain, Chet Hopp.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="clustering.SVD">
<code class="descclassname">clustering.</code><code class="descname">SVD</code><span class="sig-paren">(</span><em>stream_list</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#SVD"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.SVD" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to compute the SVD of a number of templates and return the     singular vectors and singular values of the templates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stream_list</strong> (<em>List of Obspy.Stream</em>) &#8211; List of the templates to be analysed</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">SVector(list of ndarray), SValues(list) for each channel,         Uvalues(list of ndarray) for each channel,         stachans, List of String (station.channel)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We recommend that you align the data before computing the         SVD, e.g., the P-arrival on all templates for the same channel         should appear at the same time in the trace.  See the         stacking.align_traces function for a way to do this.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="clustering.SVD_2_stream">
<code class="descclassname">clustering.</code><code class="descname">SVD_2_stream</code><span class="sig-paren">(</span><em>SVectors</em>, <em>stachans</em>, <em>k</em>, <em>sampling_rate</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#SVD_2_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.SVD_2_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to convert the singular vectors output by SVD to streams, one     for each singular vector level, for all channels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>SVectors</strong> (<em>List of np.ndarray</em>) &#8211; Singular vectors</li>
<li><strong>stachans</strong> (<em>List of Strings</em>) &#8211; List of station.channel Strings</li>
<li><strong>k</strong> (<em>int</em>) &#8211; Number of streams to return = number of SV&#8217;s to include</li>
<li><strong>sampling_rate</strong> (<em>float</em>) &#8211; Sampling rate in Hz</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">SVstreams, List of Obspy.Stream, with SVStreams[0] being         composed of the highest rank singular vectors.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="clustering.cluster">
<code class="descclassname">clustering.</code><code class="descname">cluster</code><span class="sig-paren">(</span><em>template_list</em>, <em>show=True</em>, <em>corr_thresh=0.3</em>, <em>save_corrmat=False</em>, <em>cores=u'all'</em>, <em>debug=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#cluster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to take a set of templates and cluster them, will return groups     as lists of streams.  Clustering is done by computing the cross-channel     correlation sum of each stream in stream_list with every other stream in     the list.  Scipy.cluster.hierachy functions are then used to compute the     complete distance matrix, where distance is 1 minus the normalised     cross-correlation sum such that larger distances are less similar events.     Groups are then created by clustering the distance matrix at distances     less than 1 - corr_thresh.</p>
<p>Will compute the distance matrix in parallel, using all available cores</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>stream_list</strong> &#8211; List of templates to compute clustering for</li>
<li><strong>show</strong> (<em>bool</em>) &#8211; plot linkage on screen if True, defaults to True</li>
<li><strong>corr_thresh</strong> (<em>float</em>) &#8211; Cross-channel correlation threshold for grouping</li>
<li><strong>save_corrmat</strong> (<em>bool</em>) &#8211; If True will save the distance matrix to         dist_mat.npy in the local directory.</li>
<li><strong>cores</strong> (<em>int</em>) &#8211; numebr of cores to use when computing the distance matrix,         defaults to &#8216;all&#8217; which will work out how many cpus are available         and hog them.</li>
<li><strong>debug</strong> (<em>int</em>) &#8211; Level of debugging from 1-5, higher is more output,         currently only level 1 implimented.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of groups with each group a list of streams making up         that group.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="clustering.corr_cluster">
<code class="descclassname">clustering.</code><code class="descname">corr_cluster</code><span class="sig-paren">(</span><em>trace_list</em>, <em>thresh=0.9</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#corr_cluster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.corr_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Group traces based on correlations above threshold with the stack - will     run twice, once with a lower threshold, then again with your threshold to     remove large outliers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>trace_list</strong> (<em>list of obspy.Trace</em>) &#8211; Traces to compute similarity between</li>
<li><strong>thresh</strong> (<em>float</em>) &#8211; Correlation threshold between -1-1</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">np.ndarray of bool</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We recommend that you align the data before computing the         clutsering, e.g., the P-arrival on all templates for the same channel         should appear at the same time in the trace.  See the         stacking.align_traces function for a way to do this</p>
</div>
</dd></dl>

<dl class="function">
<dt id="clustering.cross_chan_coherence">
<code class="descclassname">clustering.</code><code class="descname">cross_chan_coherence</code><span class="sig-paren">(</span><em>st1</em>, <em>st2</em>, <em>i=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#cross_chan_coherence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.cross_chan_coherence" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to determine the cross-channel coherancy between two streams of     multichannel seismic data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>st1</strong> (<em>obspy Stream</em>) &#8211; Stream one</li>
<li><strong>st2</strong> (<em>obspy Stream</em>) &#8211; Stream two</li>
<li><strong>i</strong> (<em>int</em>) &#8211; index used for parallel async processing, returned unaltered</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">cross channel coherence, float - normalized by number of        channels, if i, returns tuple of (cccoh, i) where i is int, as intput.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="clustering.dist_mat_km">
<code class="descclassname">clustering.</code><code class="descname">dist_mat_km</code><span class="sig-paren">(</span><em>catalog</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#dist_mat_km"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.dist_mat_km" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to compute the distance matrix for all events in a catalog -     will give physical distance in kilometers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>catalog</strong> (<em>List of obspy.Catalog</em>) &#8211; Catalog for which to compute the distance matrix</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">ndarray - distance matrix</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="clustering.distance_matrix">
<code class="descclassname">clustering.</code><code class="descname">distance_matrix</code><span class="sig-paren">(</span><em>stream_list</em>, <em>cores=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#distance_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.distance_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to compute the distance matrix for all templates - will give     distance as 1-abs(cccoh), e.g. a well correlated pair of templates will     have small distances, and an equally well correlated reverse image will     have the same distance as a positively correlated image - this is an issue.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>stream_list</strong> (<em>List of obspy.Streams</em>) &#8211; List of the streams to compute the distance matrix for</li>
<li><strong>cores</strong> (<em>int</em>) &#8211; Number of cores to parallel process using, defaults to 1.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">ndarray - distance matrix</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="clustering.empirical_SVD">
<code class="descclassname">clustering.</code><code class="descname">empirical_SVD</code><span class="sig-paren">(</span><em>stream_list</em>, <em>linear=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#empirical_SVD"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.empirical_SVD" title="Permalink to this definition">¶</a></dt>
<dd><p>Empirical subspace detector generation function.  Takes a list of     templates and computes the stack as the first order subspace detector,     and the differential of this as the second order subspace detector     following the emprical subspace method of Barrett &amp; Beroza, 2014 - SRL.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>stream_list</strong> (<em>list of stream</em>) &#8211; list of template streams to compute the subspace         detectors from</li>
<li><strong>linear</strong> (<em>bool</em>) &#8211; Set to true by default to compute the linear stack as the         first subspace vector, False will use the phase-weighted stack as the         first subspace vector.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">list of two streams</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="clustering.extract_detections">
<code class="descclassname">clustering.</code><code class="descname">extract_detections</code><span class="sig-paren">(</span><em>detections</em>, <em>templates</em>, <em>contbase_list</em>, <em>extract_len=90.0</em>, <em>outdir=None</em>, <em>extract_Z=True</em>, <em>additional_stations=[]</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#extract_detections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.extract_detections" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to extract the waveforms associated with each detection in a     list of detections for the template, template.  Waveforms will be     returned as a list of obspy.Streams containing segments of extract_len.      They will also be saved if outdir is set.  The default is unset.  The     default extract_len is 90 seconds per channel.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>detections</strong> (<em>list tuple of of :class: datetime.datetime, string</em>) &#8211; List of datetime objects, and their associated         template name.</li>
<li><strong>templates</strong> (<em>list of tuple of string and :class: obspy.Stream</em>) &#8211; A list of the tuples of the template name and the         template Stream used to detect detections.</li>
<li><strong>contbase_list</strong> (<em>list of tuple of string</em>) &#8211; List of tuples of the form         [&#8216;path&#8217;, &#8216;type&#8217;, &#8216;network&#8217;]  Where path is the path to the continuous         database, type is the directory structure, which can be either         Yyyyy/Rjjj.01, which is the standard IRIS Year, julian day structure,         or, yyyymmdd which is a single directory for every day.</li>
<li><strong>extract_len</strong> (<em>float</em>) &#8211; Length to extract around the detection (will be         equally cut around the detection time) in seconds.  Default is 90.0.</li>
<li><strong>outdir</strong> (<em>bool or str</em>) &#8211; Default is None, with None set, no files will be saved,         if set each detection will be saved into this directory with files         named according to the detection time, NOT than the waveform         start time. Detections will be saved into template subdirectories.</li>
<li><strong>extract_Z</strong> (<em>bool</em>) &#8211; Set to True to also extract Z channels for detections         delays will be the same as horizontal channels, only applies if         only horizontal channels were used in the template.</li>
<li><strong>additional_stations</strong> (<em>list of tuple</em>) &#8211; List of stations, chanels and networks to         also extract data for using an average delay.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">list of :class: obspy.Stream</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="clustering.group_delays">
<code class="descclassname">clustering.</code><code class="descname">group_delays</code><span class="sig-paren">(</span><em>stream_list</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#group_delays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.group_delays" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to group template waveforms according to their delays.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stream_list</strong> (<em>list of obspy.Stream</em>) &#8211; List of the waveforms you want to group</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of List of obspy.Streams where each initial list is a         group with the same delays.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="clustering.re_thresh_csv">
<code class="descclassname">clustering.</code><code class="descname">re_thresh_csv</code><span class="sig-paren">(</span><em>path</em>, <em>old_thresh</em>, <em>new_thresh</em>, <em>chan_thresh</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#re_thresh_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.re_thresh_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to remove detections by changing the threshold, can only be done     to remove detection by increasing threshold, threshold lowering will have     no effect.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<em>str</em>) &#8211; Path to the .csv detection file</li>
<li><strong>old_thresh</strong> (<em>float</em>) &#8211; Old threshold MAD multiplier</li>
<li><strong>new_thresh</strong> (<em>float</em>) &#8211; New threhsold MAD multiplier</li>
<li><strong>chan_thresh</strong> (<em>int</em>) &#8211; Minimum number of channels for a detection</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>returns: List of detections</p>
</dd></dl>

<dl class="function">
<dt id="clustering.space_cluster">
<code class="descclassname">clustering.</code><code class="descname">space_cluster</code><span class="sig-paren">(</span><em>catalog</em>, <em>d_thresh</em>, <em>show=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#space_cluster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.space_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to cluster a catalog by distance only - will compute the    matrix of physical distances between events and utilize the    scipy.clusering.hierarchy module to perform the clustering.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>catalog</strong> (<em>obspy.Catalog</em>) &#8211; Catalog of events to clustered</li>
<li><strong>d_thresh</strong> (<em>float</em>) &#8211; Maximum inter-event distance threshold</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">list of Catalog classes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="clustering.space_time_cluster">
<code class="descclassname">clustering.</code><code class="descname">space_time_cluster</code><span class="sig-paren">(</span><em>detections</em>, <em>t_thresh</em>, <em>d_thresh</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clustering.html#space_time_cluster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#clustering.space_time_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to cluster detections in space and time, use to seperate     repeaters from other events.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>detections</strong> (<em>list</em>) &#8211; List of tuple of tuple of location (lat, lon, depth         (km)), and time as a datetime object</li>
<li><strong>t_thresh</strong> (<em>float</em>) &#8211; Maximum inter-event time threshold in seconds</li>
<li><strong>d_thresh</strong> (<em>float</em>) &#8211; Maximum inter-event distance in km</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of tuple (detections, clustered) and list of indices of            clustered detections</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="utils.plotting.html" class="btn btn-neutral float-right" title="5.2. plotting" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../utils.html" class="btn btn-neutral" title="5. Utils" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, 2016: Calum John Chamberlain &amp; Chet Hopp.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.2rc',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>